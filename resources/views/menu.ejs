<div class="slideshow-container">
    <div class="mySlides fade">
        <img src="/img/slide1.png" style="width:100%"> <!-- Replace with your image path -->
        <div class="text">Caption Text</div>
    </div>

    <div class="mySlides fade">
        <img src="/img/bg.png" style="width:100%"> <!-- Replace with your image path -->
        <div class="text">Caption Text</div>
    </div>

    <!-- Add more slides as needed -->

    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
    <a class="next" onclick="plusSlides(1)">&#10095;</a>
</div>
<br>

<div style="text-align:center">
    <span class="dot" onclick="currentSlide(1)"></span> 
    <span class="dot" onclick="currentSlide(2)"></span> 
    <!-- Add more dots as needed -->
</div>

<section class="menu container mx-auto py-8">
    <div class="filters-container">
        <form action="/menu-filtered" method="GET">
            <div class="form-row"> <!-- Bootstrap row for your form elements -->
                <div class="col-md-3"> <!-- Adjust the size of each filter element -->
                    <select class="custom-select" name="category">
                        <option value="">Frauen</option>
                        <option value="237">Männerschmuck</option>
                        <option value="217">Kinderschmuck</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <select class="custom-select" name="Kollektion">
                        <option value="">Kollektion</option>
                        <option value="9">Charm</option>
                        <option value="222">Bernstein</option>
                        <option value="26">Italienische Ketten</option>
                        <option value="317">Perlen</option>
                        <option value="223">Opal</option>
                        <option value="313">Wechselsystem Platten</option>
                        <option value="306">indische Halb-/Edelsteine</option>
                        <option value="319">Geometrische Formen</option>
                        <option value="314">Oktober Fest / Bayern</option>
                        <option value="181">Weinachten</option>
                        <option value="321">Kreuze und Religionen</option>
                        <option value="323">Meer</option>
                        <option value="359">Totenköpfe/Drachen/Hexen/Fee</option>
                        <option value="366">Münze</option>
                        <option value="382">Zeilos/Evergreen</option>
                        <option value="388">Silberpflege</option>
                        <option value="389">Glücksbringer</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <select class="custom-select" name="arten">
                        <option value="">Schmuckarten</option>
                        <option value="1">Anhänger</option>
                        <option value="6">Armbänder</option>
                        <option value="27">Colier(Necklaces)</option>
                        <option value="315">Ohranhänger zum durchziehen</option>
                        <option value="14">Ohrschmuck(Earrings)</option>
                        <option value="22">Ringe</option>
                        <option value="363">Fußschmuck</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <select class="custom-select" name="symbole">
                        <option value="">Symbole</option>
                        <option value="322">Kronen</option>
                        <option value="335">Herzen</option>
                        <option value="329">Lebensblumen, Lebensbäume, Mandala, Orientalisch</option>
                        <option value="341">Sterne/Sonne/Mond</option>
                        <option value="347">Tiere</option>
                        <option value="351">Ewigkeitszeichen</option>
                        <option value="367">Blumen/Natur</option>
                        <option value="373">Spiralen/Wirbel</option>
                    </select>
                </div>
                <div class="col-auto"> <!-- For the button, to ensure it aligns properly -->
                    <button type="submit" class="btn btn-primary mb-2">Filtern</button>
                </div>
            </div>
        </form>
    </div>

        

        <div class="search-container">
            <form action="/menu" method="GET">
                <div class="search-input-container">
                    <input
                        type="text"
                        name="search"
                        class="search-input"
                        placeholder="Suchen"
                    />
                    <button type="submit" class="search-button">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </form>
        </div>

    </div>    

  <div class="pagination-container">
    <a href="<%= currentPage > 1 ? `/menu?page=${currentPage - 1}${searchQuery ? '&search=' + searchQuery : ''}` : '#' %>" class="pagination-prev">&#10094;</a>

    <%
       let pageStart = Math.max(currentPage - 2, 1);
       let pageEnd = Math.min(currentPage + 2, totalPages);

       // Show the first page and ellipsis if necessary
       if (pageStart > 1) { %>
           <a href="menu/?page=1<%= searchQuery ? '&search=' + searchQuery : '' %>" class="page-number">1</a>
           <% if (pageStart > 2) { %>
               <span class="ellipsis">...</span>
           <% } %>
    <% }

       for(let i = pageStart; i <= pageEnd; i++) { %>
           <a href="/menu/?page=<%= i %><%= searchQuery ? '&search=' + searchQuery : '' %>" 
              class="page-number <%= i === currentPage ? 'active' : '' %>"> 
              <%= i %> 
           </a>
    <% }

       if (pageEnd < totalPages) {
           if (pageEnd < totalPages - 1) { %>
               <span class="ellipsis">...</span>
           <% } %>
           <a href="/menu/?page=<%= totalPages %><%= searchQuery ? '&search=' + searchQuery : '' %>" class="page-number"><%= totalPages %></a>
    <% } %>

    <a href="<%= currentPage < totalPages ? `/menu?page=${currentPage + 1}${searchQuery ? '&search=' + searchQuery : ''}` : '#' %>" class="pagination-next">&#10095;</a>

  </div>

  <div class="row">
    <% pizzas.forEach(function(pizza) { %>
        <div class="col-md-3">
            <a href="/product/<%= pizza._id %>" class="card-link">
                <div class="card product-card">
                    <img src="/img/real_pictures<%= pizza.image %>.jpg" class="card-img-top product-image" alt="<%= pizza.name %>">
                    <div class="card-body">
                        <h5 class="card-title"><%= pizza.name %></h5>
                        <p class="card-text"><%= pizza.price %>€</p>
                    </div>
                </div>
            </a>
        </div>
    <% }) %>
</div>



</section>


<script>
let slideIndex = 0;
showSlides();

function plusSlides(n) {
  showSlides(slideIndex += n);
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides() {
  let i;
  let slides = document.getElementsByClassName("mySlides");
  let dots = document.getElementsByClassName("dot");
  let currentPage = JSON.stringify(currentPage);
  let totalPages = JSON.stringify(totalPages);
  let searchQuery = JSON.stringify(searchQuery);

  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";  
  }
  slideIndex++;
  if (slideIndex > slides.length) {slideIndex = 1}    
  for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";  
  dots[slideIndex-1].className += " active";
  setTimeout(showSlides, 10000); // Change image every 4 seconds
}

document.querySelector('.pagination-prev').addEventListener('click', function(e) {
    e.preventDefault();
    if (currentPage > 1) {
        window.location.href = `/menu?page=${currentPage - 1}${searchQuery ? '&search=' + searchQuery : ''}`;
    }
});

document.querySelector('.pagination-next').addEventListener('click', function(e) {
    e.preventDefault();
    if (currentPage < totalPages) {
        window.location.href = `/menu?page=${currentPage + 1}${searchQuery ? '&search=' + searchQuery : ''}`;
    }
});
</script>

<style>
    .card-link {
        text-decoration: none; /* Removes underline from links */
        color: inherit; /* Inherits text color to prevent color changes */
        display: block; /* Makes the entire area clickable */
    }

    .product-card {
        margin-bottom: 20px; /* Adds some space below each card */
        transition: transform 0.3s ease, background-color 0.3s; /* Smooth transition for transform and background color */
        border: 1px solid #ddd; /* Optional: adds a border */
    }

    .product-card:hover {
        transform: scale(1.03); /* Slightly enlarges the card on hover */
        background-color: black; /* Changes background to black on hover */
        color: white; /* Changes text color to white for readability */
    }

    .product-card:hover .product-image {
        transform: scale(1.05); /* Slightly enlarges the image on hover */
    }

    .card-body {
        display: flex;
        flex-direction: column;
        justify-content: space-between; /* Spreads content inside the card body */
    }

    .card-title, .card-text {
        color: inherit; /* Ensures text color inherits from the card for proper hover effect */
    }

    .card-title {
        font-size: 1.25rem; /* Adjust title size */
        margin-bottom: 0.75rem;
    }

    .card-text {
        font-size: 1rem; /* Adjust text size for consistency */
        margin-bottom: 1.25rem; /* Adds some space above the bottom of the card */
    }
</style>




